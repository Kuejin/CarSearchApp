<!DOCTYPE html>
<html>
<head>
  <title>Car Search</title>
</head>
<body>
  <h1>Search Car</h1>
  <input placeholder="Car Number" id="car_number">
  <input placeholder="Car Type" id="car_type">
  <input placeholder="Car Color" id="car_color">
  <input placeholder="Owner Name" id="owner_name">
  <input placeholder="Phone Number" id="phone_number">
  <button onclick="searchCar()">Search</button>

  <h2>Add Car</h2>
  <input placeholder="Car Number" id="add_car_number">
  <input placeholder="Car Type" id="add_car_type">
  <input placeholder="Car Color" id="add_car_color">
  <input placeholder="Owner Name" id="add_owner_name">
  <input placeholder="Phone Number" id="add_phone_number">
  <button onclick="addCar()">Add</button>

  <div id="result"></div>

  <script>
    async function searchCar() {
      const params = new URLSearchParams({
        car_number: document.getElementById('car_number').value,
        car_type: document.getElementById('car_type').value,
        car_color: document.getElementById('car_color').value,
        owner_name: document.getElementById('owner_name').value,
        phone_number: document.getElementById('phone_number').value,
      });
      const res = await fetch(`/search?${params}`);
      const data = await res.json();
      document.getElementById('result').innerText = JSON.stringify(data, null, 2);
    }

    async function addCar() {
      const body = {
        car_number: document.getElementById('add_car_number').value,
        car_type: document.getElementById('add_car_type').value,
        car_color: document.getElementById('add_car_color').value,
        owner_name: document.getElementById('add_owner_name').value,
        phone_number: document.getElementById('add_phone_number').value,
      };
      const res = await fetch('/add', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(body)
      });
      const data = await res.json();
      alert(data.message);
    }
  </script>
</body>
</html>
