<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Car Search</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #4a7da0;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      gap: 10px;
    }

    .tab-button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      background-color: #2e5b7f;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    .tab-button.active {
      background-color: #16364d;
      font-weight: bold;
    }

    .section {
      display: none;
      width: 100%;
      max-width: 550px;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 40px;
    }

    .section.active {
      display: block;
    }

    input {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #2e5b7f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #244d6c;
    }

    #result {
      white-space: pre-wrap;
      background-color: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 10px;
      max-width: 550px;
      width: 100%;
      word-break: break-all;
    }

    @media (max-width: 600px) {
      input, button {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="tabs">
    <button class="tab-button active" onclick="showTab('search')">차량 검색</button>
    <button class="tab-button" onclick="showTab('add')">차량 추가</button>
  </div>

  <div id="search" class="section active">
    <h1>차량 검색</h1>
    <input placeholder="차 번호" id="car_number">
    <input placeholder="차 종류" id="car_type">
    <input placeholder="차 색상" id="car_color">
    <input placeholder="차 주인" id="owner_name">
    <input placeholder="폰 번호" id="phone_number">
    <button onclick="searchCar()">검색</button>
  </div>

  <div id="add" class="section">
    <h2>차량 추가</h2>
    <input placeholder="차 번호" id="add_car_number">
    <input placeholder="차 종류" id="add_car_type">
    <input placeholder="차 색상" id="add_car_color">
    <input placeholder="차 주인" id="add_owner_name">
    <input placeholder="폰 번호" id="add_phone_number">
    <button onclick="addCar()">추가</button>
  </div>

  <div id="result"></div>

  <script>
    function showTab(tabName) {
      // 탭 버튼 클래스 변경
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });

      // 해당 버튼에 active 적용
      const activeButton = Array.from(document.querySelectorAll('.tab-button'))
        .find(btn => btn.textContent.includes(tabName === 'search' ? '검색' : '추가'));
      activeButton.classList.add('active');

      // 섹션 전환
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(tabName).classList.add('active');
    }

    async function searchCar() {
      const params = new URLSearchParams({
        car_number: document.getElementById('car_number').value,
        car_type: document.getElementById('car_type').value,
        car_color: document.getElementById('car_color').value,
        owner_name: document.getElementById('owner_name').value,
        phone_number: document.getElementById('phone_number').value,
      });
      const res = await fetch(`/search?${params}`);
      const data = await res.json();
      document.getElementById('result').innerText = JSON.stringify(data, null, 2);
    }

    async function addCar() {
      const body = {
        car_number: document.getElementById('add_car_number').value,
        car_type: document.getElementById('add_car_type').value,
        car_color: document.getElementById('add_car_color').value,
        owner_name: document.getElementById('add_owner_name').value,
        phone_number: document.getElementById('add_phone_number').value,
      };
      const res = await fetch('/add', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(body)
      });
      const data = await res.json();
      alert(data.message);
    }
  </script>
</body>
</html>
